let data;
      let genreObjects = [];


        let options = {};
        axios
            .get('/vevo/genre_bubbles/', options)
            .then(res => {
                if (res.data.error) {
                    console.log('error');
                } else {
                    let genres = res.data.genres;
                    genres.forEach(function(genre, index) {
                        let artistObjects = [];
                        options = {
                            params: {
                                genre: genre,
                            }
                        };
                       axios
                           .get('vevo/genre_top_artists/', options)
                           .then(res => {
                               if (res.data.error) {
                                   console.log('error');
                               } else {
                                   let artists = res.data.artists;
                                   artists.forEach(function (artistList) {
                                       if (artistList != null) {
                                           let artist = artistList[0]
                                           if (artist != null) {
                                               let songObjects = [];
                                               options = {
                                                   params: {
                                                       genre: genre,
                                                       artist: artist,
                                                   }
                                               };
                                               axios
                                                   .get('vevo/genre_artist_top_songs/', options)
                                                   .then(res => {
                                                       if (res.data.error) {
                                                           console.log('error');
                                                       } else {
                                                           let songs = res.data.songs;
                                                           songs.forEach(function (song) {
                                                               songObjects.push({
                                                                   name: song[0],
                                                                   size: song[1],
                                                               })
                                                           });
                                                           artistObjects.push({
                                                               name: artist,
                                                               children: songObjects
                                                           })
                                                       }
                                                   })
                                                   .catch(function (error) {
                                                       console.log(error);
                                                   })
                                           }
                                       }
                                   });
                                   genreObjects.push({
                                       name: genre,
                                       children: artistObjects,
                                   })
                               }
                           })
                           .catch(function(error) {
                               console.log(error);
                           })
                    });
                    data = {
                        name: 'genres',
                        children: genreObjects,
                    }
                }
            })
            .catch(function (error) {
                console.error(error);
            });